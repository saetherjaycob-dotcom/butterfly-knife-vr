<!-- Knife Root -->
<a-entity id="knife" position="0 1.45 -1">

  <!-- Blade (fixed between handles) -->
  <a-box
    id="blade"
    width="0.01"
    height="0.18"
    depth="0.02"
    color="#ccc"
    position="0 0.09 0">
  </a-box>

  <!-- Handle A -->
  <a-box
    id="handleA"
    width="0.05"
    height="0.15"
    depth="0.03"
    color="#444"
    position="0 -0.075 0"
    rotation="0 0 0">
    <!-- Animation for open/close -->
    <a-animation
      attribute="rotation"
      dur="300"
      fill="forwards"
      begin="toggleA"
      to="180 0 0">
    </a-animation>
  </a-box>

  <!-- Handle B -->
  <a-box
    id="handleB"
    width="0.05"
    height="0.15"
    depth="0.03"
    color="#666"
    position="0 -0.075 0"
    rotation="0 0 0">
    <!-- Animation for open/close -->
    <a-animation
      attribute="rotation"
      dur="300"
      fill="forwards"
      begin="toggleB"
      to="-180 0 0">
    </a-animation>
  </a-box>

</a-entity>

<script>
AFRAME.registerComponent('knife-anim-control', {
  init: function () {
    const handleA = this.el.querySelector('#handleA');
    const handleB = this.el.querySelector('#handleB');

    this.open = false;

    window.addEventListener('triggerdown', () => {
      this.open = !this.open;
      // trigger animations
      handleA.emit('toggleA');
      handleB.emit('toggleB');

      // flip animation back for next toggle
      if (this.open) {
        handleA.querySelector('a-animation').setAttribute('to', '180 0 0');
        handleB.querySelector('a-animation').setAttribute('to', '-180 0 0');
      } else {
        handleA.querySelector('a-animation').setAttribute('to', '0 0 0');
        handleB.querySelector('a-animation').setAttribute('to', '0 0 0');
      }
    });
  }
});
</script>

<a-entity knife-anim-control></a-entity>
